(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{2198:(e,t,s)=>{Promise.resolve().then(s.bind(s,8055))},6552:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5453).v)(e=>({loading:!1,target:"",startLoading:t=>{e(()=>({loading:!0,target:t&&t.target?t.target:""}))},stopLoading:()=>{e(()=>({loading:!1,initLoading:!1,target:""}))}}))},8055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(5155),a=s(2115),n=s(9925),l=s(3464);let{startLoading:c,stopLoading:i}=s(6552).A.getState(),{showAlert:o,hideAlert:d}=n.A.getState(),u=l.A.create({timeout:1e4,baseURL:"https://ohnae8.mycafe24.com/api"});u.interceptors.request.use(e=>(c(),e),e=>(i(),console.log(e),Promise.reject())),u.interceptors.response.use(e=>{if(i(),200===e.status)return e;Promise.reject()},e=>{var t,s;i();let r=null==(t=e.response)?void 0:t.data;switch(null==(s=e.response)?void 0:s.status){case 401:case 403:break;case 503:o({message:r.message,buttons:[{type:"on",text:"확인",callback:()=>{d()}}]})}return Promise.reject()});let h=(e,t)=>u({url:e,data:JSON.stringify(t),method:"post",headers:{"Content-Type":"application/json"},withCredentials:!1}),m={setCounsel:async e=>(await h("/app/set-counsel",e||{})).data,getCode:async e=>(await h("/app/get-code",e||{})).data};var g=s(2509),p=s(5695);function x(){let e=(0,p.useRouter)(),{showAlert:t,hideAlert:s}=(0,n.A)(),l=(0,a.useRef)(null),[c,i]=(0,a.useState)([]),[o,d]=(0,a.useState)(""),[u,h]=(0,a.useState)({memberName:"",phoneNo:"",content:""}),[x,j]=(0,a.useState)(null),N=e=>{let{name:t,value:s}=e.target;h(e=>({...e,[t]:s}))},f=async r=>{if(r.preventDefault(),!o)return t({message:"상담유형을 선택해주세요."});if(!u.memberName.trim())return t({message:"이름을 입력하세요."});if(!/^[0-9]{10,11}$/.test(u.phoneNo))return t({message:"전화번호를 올바르게 입력하세요."});if(!u.content.trim())return t({message:"상담내용을 입력하세요."});if(!x)return t({message:"로봇이 아님을 확인해주세요."});let a={companyId:"landline",counselCode:o,...u,captcha:x},n=await m.setCounsel(a);t({message:n.success?"정상등록 되었습니다.":n.message,buttons:[{type:"on",text:"확인",callback:()=>{s(),n.success&&e.replace("/")}}]})};return(0,a.useEffect)(()=>{(async()=>{try{let e=await m.getCode({code:"counselCode"});e.success&&(i(e.data),e.data.length>0&&d(e.data[0].codeName))}catch(e){console.error(e)}})()},[]),(0,r.jsxs)("form",{className:"counsel-form",onSubmit:f,children:[(0,r.jsx)("table",{className:"write-table",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"required",children:"상담유형"}),(0,r.jsx)("td",{children:(0,r.jsx)("select",{value:o,onChange:e=>d(e.target.value),required:!0,style:{width:"200px"},children:c.map((e,t)=>(0,r.jsx)("option",{value:e.codeName,children:e.codeName},t))})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"required",children:"이름"}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{name:"memberName",value:u.memberName,onChange:N,maxLength:20,required:!0})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"required",children:"전화번호"}),(0,r.jsx)("td",{children:(0,r.jsx)("input",{name:"phoneNo",value:u.phoneNo,onChange:N,maxLength:11,required:!0})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"required",children:"상담내용"}),(0,r.jsxs)("td",{children:[(0,r.jsx)("textarea",{name:"content",value:u.content,onChange:N,maxLength:200,required:!0,style:{height:"120px"}}),(0,r.jsxs)("div",{children:[u.content.length," / 200 자"]})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"required",children:"로봇방지"}),(0,r.jsx)("td",{children:(0,r.jsx)(g.A,{ref:l,sitekey:"6LdtLfQrAAAAAB0hn015g6AG6oDkMR4e7RhywpMv",onChange:e=>{j(e)}})})]})]})}),(0,r.jsx)("div",{className:"button-wrapper",children:(0,r.jsx)("button",{type:"submit",children:"신청하기"})})]})}function j(){let[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{t(!0)},[]),(0,r.jsx)("div",{className:"counsel",children:(0,r.jsx)(x,{})})}},9925:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(5453).v)(e=>({alert:null,error:!1,showAlert:t=>{e(()=>({alert:t}))},hideAlert:()=>{e(()=>({alert:null}))},showError:()=>{e(()=>({error:!0}))},hideError:()=>{e(()=>({error:!1}))}}))}},e=>{e.O(0,[866,441,964,358],()=>e(e.s=2198)),_N_E=e.O()}]);